<% layout('partials/layout') %>

<div class="container my-5">
  <h2 class="text-center mb-4">Search Results for "<%= query %>"</h2>

  <!-- BLOGS -->
  <% if (blogResults.length > 0) { %>
    <h3>Blogs</h3>
    <div class="row">
      <% blogResults.forEach(blog => { %>
        <div class="col-md-6 mb-3">
          <div class="card p-3 h-100">
            <h5><a href="<%= blog.link %>"><%= blog.title %></a></h5>
            <p><%= blog.description %></p>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>

  <!-- SERVICES -->
  <% if (serviceResults.length > 0) { %>
    <h3>Services</h3>
    <div class="row">
      <% serviceResults.forEach(service => { %>
        <div class="col-md-6 mb-3">
          <div class="card p-3 h-100">
            <h5><a href="<%= service.link %>"><%= service.title %></a></h5>
            <p><%= service.description %></p>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>

  <!-- PROJECTS -->
  <% if (projectResults.length > 0) { %>
    <h3>Projects</h3>
    <div class="row">
      <% projectResults.forEach(project => { %>
        <div class="col-md-6 mb-3">
          <div class="card p-3 h-100">
            <h5><a href="<%= project.link %>"><%= project.title %></a></h5>
            <p><%= project.description %></p>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>

  <!-- ARCHIVES -->
  <% if (archiveResults.length > 0) { %>
    <h3>Archives</h3>
    <div class="row">
      <% archiveResults.forEach(archive => { %>
        <div class="col-md-6 mb-3">
          <div class="card p-3 h-100">
            <h5><a href="<%= archive.link %>"><%= archive.title %></a></h5>
            <p><%= archive.description %></p>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>

 <!-- FAQ Results -->
  <% if (faqResults && faqResults.length > 0) { %>
    <h3 class="mt-4">FAQs</h3>
    <div class="row">
      <% faqResults.forEach(faq => { %>
        <div class="col-md-6 mb-3">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5 class="card-title">
                <a href="/faqs/<%= faq.slug %>"><%= faq.category %></a>
              </h5>
              <p class="card-text"><%= faq.description %></p>
              <ul class="list-unstyled">
                <% faq.questions.forEach(q => { %>
                  <li class="mb-2">
                    <strong><%= q.question %></strong><br>
                    <small><%= q.answer %></small>
                  </li>
                <% }) %>
              </ul>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>

  <!-- TAGS -->
  <% if (tagResults.length > 0) { %>
    <h3>Tags</h3>
    <div class="row">
      <% tagResults.forEach(tag => { %>
        <div class="col-md-6 mb-3">
          <div class="card p-3 h-100">
            <h5><a href="<%= tag.link %>"><%= tag.title %></a></h5>
            <p><%= tag.description %></p>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>

  <!-- CATEGORIES -->
  <% if (categoryResults.length > 0) { %>
    <h3>Categories</h3>
    <div class="row">
      <% categoryResults.forEach(cat => { %>
        <div class="col-md-6 mb-3">
          <div class="card p-3 h-100">
            <h5><a href="<%= cat.link %>"><%= cat.title %></a></h5>
            <p><%= cat.description %></p>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>

  <!-- No results -->
  <% if (
        blogResults.length === 0 &&
        serviceResults.length === 0 &&
        projectResults.length === 0 &&
        archiveResults.length === 0 &&
        faqResults.length === 0 &&
        tagResults.length === 0 &&
        categoryResults.length === 0
      ) { %>
    <p class="text-center mt-4">No results found for "<%= query %>".</p>
  <% } %>
</div>